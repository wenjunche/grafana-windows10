(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{"1Xqh":function(e,t,n){"use strict";var r=n("q1tI"),o=n.n(r);t.a=function(e){var t=e.users,n=e.onRoleChange,r=e.onRemoveUser;return o.a.createElement("table",{className:"filter-table form-inline"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null),o.a.createElement("th",null,"Login"),o.a.createElement("th",null,"Email"),o.a.createElement("th",null,"Name"),o.a.createElement("th",null,"Seen"),o.a.createElement("th",null,"Role"),o.a.createElement("th",{style:{width:"34px"}}))),o.a.createElement("tbody",null,t.map((function(e,t){return o.a.createElement("tr",{key:"".concat(e.userId,"-").concat(t)},o.a.createElement("td",{className:"width-4 text-center"},o.a.createElement("img",{className:"filter-table__avatar",src:e.avatarUrl})),o.a.createElement("td",null,e.login),o.a.createElement("td",null,o.a.createElement("span",{className:"ellipsis"},e.email)),o.a.createElement("td",null,e.name),o.a.createElement("td",null,e.lastSeenAtAge),o.a.createElement("td",null,o.a.createElement("div",{className:"gf-form-select-wrapper width-12"},o.a.createElement("select",{value:e.role,className:"gf-form-input",onChange:function(t){return n(t.target.value,e)}},["Viewer","Editor","Admin"].map((function(e,t){return o.a.createElement("option",{value:e,key:"".concat(e,"-").concat(t)},e)}))))),o.a.createElement("td",null,o.a.createElement("div",{onClick:function(){return r(e)},className:"btn btn-danger btn-small"},o.a.createElement("i",{className:"fa fa-remove"}))))}))))}},"4sTo":function(e,t,n){"use strict";var r=n("q1tI"),o=n.n(r),a=n("/MKj"),c=n("nKOl");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function t(){var e,n;i(this,t);for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return(n=l(this,(e=f(t)).call.apply(e,[this].concat(a)))).copyUrlRef=Object(r.createRef)(),n.copyToClipboard=function(){var e=n.copyUrlRef.current;e&&(e.select(),document.execCommand("copy"))},n}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.invitee,n=e.revokeInvite;return o.a.createElement("tr",null,o.a.createElement("td",null,t.email),o.a.createElement("td",null,t.name),o.a.createElement("td",{className:"text-right"},o.a.createElement("button",{className:"btn btn-inverse btn-small",onClick:this.copyToClipboard},o.a.createElement("textarea",{readOnly:!0,value:t.url,style:{position:"absolute",bottom:0,right:0,opacity:0,zIndex:-10},ref:this.copyUrlRef}),"Copy Invite"),"Â "),o.a.createElement("td",null,o.a.createElement("button",{className:"btn btn-danger btn-small",onClick:function(){return n(t.code)}},o.a.createElement("i",{className:"fa fa-remove"}))))}}])&&s(n.prototype,a),c&&s(n,c),t}(r.PureComponent),b={revokeInvite:c.d},y=Object(a.connect)((function(){return{}}),b)(m);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return O}));var O=function(e){function t(){return h(this,t),g(this,w(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.invitees;return o.a.createElement("table",{className:"filter-table form-inline"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Email"),o.a.createElement("th",null,"Name"),o.a.createElement("th",null),o.a.createElement("th",{style:{width:"34px"}}))),o.a.createElement("tbody",null,e.map((function(e,t){return o.a.createElement(y,{key:"".concat(e.id,"-").concat(t),invitee:e})}))))}}])&&d(n.prototype,r),a&&d(n,a),t}(r.PureComponent)},DWvN:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"UsersListPage",(function(){return I}));var r=n("q1tI"),o=n.n(r),a=n("0cfB"),c=n("/MKj"),u=n("Obii"),i=n("ZGyg"),s=n("vKCI"),l=n("1Xqh"),f=n("4sTo"),p=n("GQ3c"),m=n("Xmxp"),b=n("nKOl"),y=n("lzJ5"),v=n("KvmV"),h=n("nABS");function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t,n,r,o,a,c){try{var u=e[a](c),i=u.value}catch(e){return void n(e)}u.done?t(i):Promise.resolve(i).then(r,o)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){g(a,r,o,c,u,"next",e)}function u(e){g(a,r,o,c,u,"throw",e)}c(void 0)}))}}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var I=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=x(this,k(t).call(this,e))).onRoleChange=function(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{role:e});n.props.updateUser(r)},n.onRemoveUser=function(e){m.b.emit(p.CoreEvents.showConfirmModal,{title:"Delete",text:"Are you sure you want to delete user "+e.login+"?",yesText:"Delete",icon:"fa-warning",onConfirm:function(){n.props.removeUser(e.userId)}})},n.onShowInvites=function(){n.setState((function(e){return{showInvites:!e.showInvites}}))},n.props.externalUserMngInfo&&(n.externalUserMngInfoHtml=Object(u.renderMarkdown)(n.props.externalUserMngInfo)),n.state={showInvites:!1},n}var n,r,a,c,b;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.fetchUsers(),this.fetchInvitees()}},{key:"fetchUsers",value:(b=w(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.loadUsers();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return b.apply(this,arguments)})},{key:"fetchInvitees",value:(c=w(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.loadInvitees();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"renderTable",value:function(){var e=this,t=this.props,n=t.invitees,r=t.users;return this.state.showInvites?o.a.createElement(f.a,{invitees:n}):o.a.createElement(l.a,{users:r,onRoleChange:function(t,n){return e.onRoleChange(t,n)},onRemoveUser:function(t){return e.onRemoveUser(t)}})}},{key:"render",value:function(){var e=this.props,t=e.navModel,n=e.hasFetched,r=this.externalUserMngInfoHtml;return o.a.createElement(i.a,{navModel:t},o.a.createElement(i.a.Contents,{isLoading:!n},o.a.createElement(o.a.Fragment,null,o.a.createElement(s.a,{onShowInvites:this.onShowInvites,showInvites:this.state.showInvites}),r&&o.a.createElement("div",{className:"grafana-info-box",dangerouslySetInnerHTML:{__html:r}}),n&&this.renderTable())))}}])&&j(n.prototype,r),a&&j(n,a),t}(r.PureComponent);var P={loadUsers:b.b,loadInvitees:b.a,setUsersSearchQuery:h.c,updateUser:b.e,removeUser:b.c};t.default=Object(a.hot)(e)(Object(c.connect)((function(e){return{navModel:Object(y.a)(e.navIndex,"users"),users:Object(v.c)(e.users),searchQuery:Object(v.d)(e.users),invitees:Object(v.a)(e.users),externalUserMngInfo:e.users.externalUserMngInfo,hasFetched:e.users.hasFetched}}),P)(I))}.call(this,n("3UD+")(e))},EKT6:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("q1tI"),o=n.n(r),a=n("Obii"),c=Object(r.forwardRef)((function(e,t){return o.a.createElement("label",{className:e.labelClassName},o.a.createElement("input",{ref:t,type:"text",className:e.inputClassName,value:Object(a.unEscapeStringFromRegex)(e.value),onChange:function(t){return e.onChange(Object(a.escapeStringForRegex)(t.target.value))},placeholder:e.placeholder?e.placeholder:null}),o.a.createElement("i",{className:"gf-form-input-icon fa fa-search"}))}))},KvmV:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return c}));var r=function(e){var t=new RegExp(e.searchQuery,"i");return e.users.filter((function(e){return t.test(e.login)||t.test(e.email)||t.test(e.name)}))},o=function(e){var t=new RegExp(e.searchQuery,"i");return e.invitees.filter((function(e){return t.test(e.name)||t.test(e.email)}))},a=function(e){return e.invitees.length},c=function(e){return e.searchQuery}},nKOl:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return i})),n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return f}));var r=n("t8hP"),o=n("nABS");function a(e,t,n,r,o,a,c){try{var u=e[a](c),i=u.value}catch(e){return void n(e)}u.done?t(i):Promise.resolve(i).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var c=e.apply(t,n);function u(e){a(c,r,o,u,i,"next",e)}function i(e){a(c,r,o,u,i,"throw",e)}u(void 0)}))}}function u(){return function(){var e=c(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(r.getBackendSrv)().get("/api/org/users");case 2:n=e.sent,t(Object(o.d)(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function i(){return function(){var e=c(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(r.getBackendSrv)().get("/api/org/invites");case 2:n=e.sent,t(Object(o.b)(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function s(e){return function(){var t=c(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(r.getBackendSrv)().patch("/api/org/users/".concat(e.userId),{role:e.role});case 2:n(u());case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function l(e){return function(){var t=c(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(r.getBackendSrv)().delete("/api/org/users/".concat(e));case 2:n(u());case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function f(e){return function(){var t=c(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(r.getBackendSrv)().patch("/api/org/invites/".concat(e,"/revoke"),{});case 2:n(i());case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},vKCI:function(e,t,n){"use strict";var r=n("q1tI"),o=n.n(r),a=n("/MKj"),c=n("TSYQ"),u=n.n(c),i=n("nABS"),s=n("KvmV"),l=n("EKT6");function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(){return p(this,t),b(this,y(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.canInvite,n=e.externalUserMngLinkName,r=e.externalUserMngLinkUrl,a=e.searchQuery,c=e.pendingInvitesCount,i=e.setUsersSearchQuery,s=e.onShowInvites,f=e.showInvites,p=u()({btn:!0,"toggle-btn":!0,active:f}),m=u()({btn:!0,"toggle-btn":!0,active:!f});return o.a.createElement("div",{className:"page-action-bar"},o.a.createElement("div",{className:"gf-form gf-form--grow"},o.a.createElement(l.a,{labelClassName:"gf-form--has-input-icon",inputClassName:"gf-form-input width-20",value:a,onChange:i,placeholder:"Filter by email, login or name"}),c>0&&o.a.createElement("div",{style:{marginLeft:"1rem"}},o.a.createElement("button",{className:m,key:"users",onClick:s},"Users"),o.a.createElement("button",{className:p,onClick:s,key:"pending-invites"},"Pending Invites (",c,")")),o.a.createElement("div",{className:"page-action-bar__spacer"}),t&&o.a.createElement("a",{className:"btn btn-primary",href:"org/users/invite"},o.a.createElement("span",null,"Invite")),r&&o.a.createElement("a",{className:"btn btn-primary",href:r,target:"_blank",rel:"noopener"},n)))}}])&&m(n.prototype,r),a&&m(n,a),t}(r.PureComponent);var d={setUsersSearchQuery:i.c};t.a=Object(a.connect)((function(e){return{searchQuery:Object(s.d)(e.users),pendingInvitesCount:Object(s.b)(e.users),externalUserMngLinkName:e.users.externalUserMngLinkName,externalUserMngLinkUrl:e.users.externalUserMngLinkUrl,canInvite:e.users.canInvite}}),d)(h)}}]);
//# sourceMappingURL=UsersListPage.898fe9e20a782b4232fe.js.map