{"version":3,"sources":["webpack:///./public/app/features/admin/UserCreatePage.tsx"],"names":["createUser","user","getBackendSrv","post","mapDispatchToProps","updateLocation","hot","module","connect","state","navModel","getNavModel","navIndex","onSubmit","useCallback","data","path","Contents","Form","validateOn","register","errors","Field","label","required","invalid","name","error","Input","size","ref","password","type","validate","value","trim","length","Button"],"mappings":"0hBAsBA,IAAMA,EAAU,4CAAG,WAAOC,GAAP,yGAAyBC,0BAAgBC,KAAK,mBAAoBF,IAAlE,2CAAH,sDAwDVG,EAAqB,CACzBC,oBAEaC,wBAAIC,EAAJD,CAAYE,mBAPH,SAACC,GAAD,MAAwB,CAC9CC,SAAUC,YAAYF,EAAMG,SAAU,mBAMYR,EAAzBI,EAzD2B,SAAC,GAAiC,IAA/BE,EAA+B,EAA/BA,SAAUL,EAAqB,EAArBA,eAC3DQ,EAAWC,sBAAW,4CAAC,WAAOC,GAAP,gGACrBf,EAAWe,GADU,OAE3BV,EAAe,CAAEW,KAAM,iBAFI,2CAAD,sDAGzB,IAEH,OACE,kBAAC,IAAD,CAAMN,SAAUA,GACd,kBAAC,IAAKO,SAAN,KACE,4CACA,kBAAC,QAAMC,KAAP,CAAYL,SAAUA,EAAUM,WAAW,WACxC,YAA0B,IAAvBC,EAAuB,EAAvBA,SAAUC,EAAa,EAAbA,OACZ,OACE,oCACE,kBAAC,QAAMC,MAAP,CAAaC,MAAM,OAAOC,UAAQ,EAACC,UAAWJ,EAAOK,KAAMC,QAASN,EAAOK,MAAQ,oBACjF,kBAAC,QAAME,MAAP,CAAaF,KAAK,OAAOG,KAAK,KAAKC,IAAKV,EAAS,CAAEI,UAAU,OAG/D,kBAAC,QAAMF,MAAP,CAAaC,MAAM,UACjB,kBAAC,QAAMK,MAAP,CAAaF,KAAK,QAAQG,KAAK,KAAKC,IAAKV,KAG3C,kBAAC,QAAME,MAAP,CAAaC,MAAM,YACjB,kBAAC,QAAMK,MAAP,CAAaF,KAAK,QAAQG,KAAK,KAAKC,IAAKV,KAE3C,kBAAC,QAAME,MAAP,CACEC,MAAM,WACNC,UAAQ,EACRC,UAAWJ,EAAOU,SAClBJ,QAASN,EAAOU,UAAY,+DAE5B,kBAAC,QAAMH,MAAP,CACEC,KAAK,KACLG,KAAK,WACLN,KAAK,WACLI,IAAKV,EAAS,CACZa,SAAU,SAAAC,GAAK,MAAqB,KAAjBA,EAAMC,QAAiBD,EAAME,QAAU,QAIhE,kBAAC,QAAMC,OAAP,CAAcL,KAAK,UAAnB,0B","file":"UserCreatePage.898fe9e20a782b4232fe.js","sourcesContent":["import React, { useCallback } from 'react';\nimport { hot } from 'react-hot-loader';\nimport { connect } from 'react-redux';\nimport { Forms } from '@grafana/ui';\nimport { NavModel } from '@grafana/data';\nimport { getBackendSrv } from '@grafana/runtime';\nimport { StoreState } from '../../types';\nimport { getNavModel } from '../../core/selectors/navModel';\nimport Page from 'app/core/components/Page/Page';\nimport { updateLocation } from 'app/core/actions';\n\ninterface UserCreatePageProps {\n  navModel: NavModel;\n  updateLocation: typeof updateLocation;\n}\ninterface UserDTO {\n  name: string;\n  password: string;\n  email?: string;\n  login?: string;\n}\n\nconst createUser = async (user: UserDTO) => getBackendSrv().post('/api/admin/users', user);\n\nconst UserCreatePage: React.FC<UserCreatePageProps> = ({ navModel, updateLocation }) => {\n  const onSubmit = useCallback(async (data: UserDTO) => {\n    await createUser(data);\n    updateLocation({ path: '/admin/users' });\n  }, []);\n\n  return (\n    <Page navModel={navModel}>\n      <Page.Contents>\n        <h1>Add new user</h1>\n        <Forms.Form onSubmit={onSubmit} validateOn=\"onBlur\">\n          {({ register, errors }) => {\n            return (\n              <>\n                <Forms.Field label=\"Name\" required invalid={!!errors.name} error={!!errors.name && 'Name is required'}>\n                  <Forms.Input name=\"name\" size=\"md\" ref={register({ required: true })} />\n                </Forms.Field>\n\n                <Forms.Field label=\"E-mail\">\n                  <Forms.Input name=\"email\" size=\"md\" ref={register} />\n                </Forms.Field>\n\n                <Forms.Field label=\"Username\">\n                  <Forms.Input name=\"login\" size=\"md\" ref={register} />\n                </Forms.Field>\n                <Forms.Field\n                  label=\"Password\"\n                  required\n                  invalid={!!errors.password}\n                  error={!!errors.password && 'Password is required and must contain at least 4 characters'}\n                >\n                  <Forms.Input\n                    size=\"md\"\n                    type=\"password\"\n                    name=\"password\"\n                    ref={register({\n                      validate: value => value.trim() !== '' && value.length >= 4,\n                    })}\n                  />\n                </Forms.Field>\n                <Forms.Button type=\"submit\">Create user</Forms.Button>\n              </>\n            );\n          }}\n        </Forms.Form>\n      </Page.Contents>\n    </Page>\n  );\n};\n\nconst mapStateToProps = (state: StoreState) => ({\n  navModel: getNavModel(state.navIndex, 'global-users'),\n});\n\nconst mapDispatchToProps = {\n  updateLocation,\n};\nexport default hot(module)(connect(mapStateToProps, mapDispatchToProps)(UserCreatePage));\n"],"sourceRoot":""}